# Описание
Пакет `pyfactoring` предоставляет возможность автоматического поиска схожих и повторяющихся блоков кода,
с дальнейшим выносом их в отдельные функции. То есть проводит автоматический рефакторинг Вашей программы.

## Возможности
- Анализ исходных текстов программ и получение из них программных идиом;
- Извлечение блоков исходного кода соответствующих найденным идиомам;
- [Конфигурация пакета](#конфигурация).

### В планах
- Анализ исходных текстов программ путем синтаксического анализа (в процессе)
- Объединение полученных блоков из реализованного алгоритма поиска идиом и их фильтрация.
- Выделение программных блоков в функции.

# Инсталляция
Можно провести двумя способами. 
Рекомендуется первый, поскольку он сразу устанавливается в виртуальное окружение.

## Способ 1
Войти в виртуальное окружение `venv` и выполнить следующую команду:

```bash
pip install git+https://github.com/Kiriruso/pyfactoring.git
```

Или для режима разработки:

```bash
pip install -e git+https://github.com/Kiriruso/pyfactoring.git#egg=package_name[dev]
```

## Способ 2
Перед инсталляцией нужно скачать пакет с репозитория и распаковать его в корневой директории Вашего проекта.
Затем необходимо войти в виртуальное окружение `venv` и выполнить следующую команду:

```bash
pip install -e .
```

Или для режима разработки:

```bash
pip install -e .[dev]
```

# Запуск
Запустить пакет можно следующей командой:

```bash
pyfactoring
```

Затем Вы встретите следующие сообщения:

```bash
Введите абсолютный путь к проекту/файлу[.txt | .py]: <your path>
Введите папки для исключения или skip: <dir> <dir> | skip
Введите файлы для исключения или skip: <file>.py <file>.py | skip
```

## Конфигурация
Пакет доступен для конфигурирования и настройки. 
Для этого в корневой директории создайте файл `pyproject.toml`, 
укажите заголовок `[tool.pyfactoring]` и после него пропишите необходимые [настройки](#настраиваемые-свойства). 

```toml
[tool.pyfactoring]
idiom_count = 5
idiom_length = 10
```

### Настраиваемые свойства
- _idiom_count_ - минимальное количество найденных деревьев, начиная с которого они образуют идиому. **По умолчанию 5.** 
- _idiom_length_ - минимальная длина дерева, начиная с которого оно считается идиомой. **По умолчанию 10.**